#!/bin/bash
# Wrapper script for install-aura-post (fish script)

# Check if fish is installed
if ! command -v fish &> /dev/null; then
    echo "❌ ERROR: Fish shell is not installed"
    echo "Installing fish..."
    sudo pacman -Syu fish --noconfirm --needed || {
        echo "Failed to install fish. Please install it manually: sudo pacman -S fish"
        exit 1
    }
fi

# Find the install-aura-post script
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
POST_SCRIPT="$SCRIPT_DIR/install-aura-post"

# Check if the fish script exists
if [ ! -f "$POST_SCRIPT" ]; then
    # Try alternate location
    POST_SCRIPT="$HOME/.local/share/aura/bin/install-aura-post"
fi

if [ ! -f "$POST_SCRIPT" ]; then
    echo "❌ ERROR: install-aura-post script not found"
    exit 1
fi

# Make sure it's executable
chmod +x "$POST_SCRIPT"

# Run the fish script with all arguments
exec fish "$POST_SCRIPT" "$@"
